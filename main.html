<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="phonegap.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.2.0.min.css"/>
<link rel="stylesheet" type="text/css" href="css/Mirolo.css"/>
<script type="text/javascript" charset="utf-8" src="js/jquery-1.8.3.min.js"></script>

<script>

$(document).ready(function() {
 
		var timer = null; 
		var idToShow = null;

		$(document).bind('pagehide', function(event, data) {
			//console.log("next page: " + data.nextPage.attr('id'));
			
			idToShow = data.nextPage.attr('id');
			
			if(idToShow.indexOf("_") != -1)
			{
				idToShow = idToShow + "_img";
				timer = window.setInterval(reloadImg, 3000);  //setTimeout("reloadImg(" + idToShow + ")",500);
				//console.log("streaming: ON");
			}
			else
			{
				clearInterval(timer);
				idToShow = null;
				//console.log("streaming: OFF");
			}
			
		});
		
		function reloadImg(){
			var obj = document.getElementById(idToShow);
			var rand = Math.random();
			obj.src = obj.src.replace(/([?|&]t=)[^\&]+/, '$1' + rand);
			//console.log("updating: " + idToShow);
		}
		
		// --------------
 
        var dataPath0 = 'http://www.mirolo.net/m/data.php?cat=vidanocturna';
    
        $.getJSON(dataPath0,
        function(data0){
          $.each(data0.items, function(i,item0){
          
                $('#page0 #menuList0').append("<li class='ui-li-has-thumb'><a href='#page0" + i + "' data-transition='slide'><img src='" + item0.icon + "' class='ui-li-thumb'><h3 class='ui-li-heading'>" + item0.title + "</h3><p class='ui-li-desc'>" + item0.published + "</p></a></li>");
    
				var clientPageHeader0 = "<ul data-role='listview' data-inset='false' id='menuListHeader0'><li class='ui-li-has-thumb'><a href='#'><img src='" + item0.icon + "' class='ui-li-thumb'><h3 class='ui-li-heading'>" + item0.title + "</h3></a></li></ul>"
				var clientPage0 =  clientPageHeader0 +"<br/><div><div style='background-image: url(css/images/Apagado.jpg); background-size: 100%;'><img id='page0_" + i + "_img' alt='' src='http://" + item0.url + "/snapshot.cgi?user=visitor&pwd=1234&t=1234' width='100%' /></div></div><div class='transbox'><p>" + item0.description + "</p></div>";
                var newPage0 = $("<div data-role=page id=page0_" + i + " data-url=page0" + i + " data-add-back-btn='true'><div data-role=header><h1> Mirolo | " + item0.title + "</h1></div><div data-role=content>" + clientPage0 + "</div></div>");

                newPage0.appendTo( $.mobile.pageContainer );
    
            });
        });

        var dataPath1 = 'http://www.mirolo.net/m/data.php?cat=gastronomia';

        $.getJSON(dataPath1,
        function(data1){
          $.each(data1.items, function(i,item1){
          
                $('#page1 #menuList1').append("<li class='ui-li-has-thumb'><a href='#page1" + i + "' data-transition='slide'><img src='" + item1.icon + "' class='ui-li-thumb'><h3 class='ui-li-heading'>" + item1.title + "</h3><p class='ui-li-desc'>" + item1.published + "</p></a></li>");
    
				var clientPageHeader1 = "<ul data-role='listview' data-inset='false' id='menuListHeader1'><li class='ui-li-has-thumb'><a href='#'><img src='" + item1.icon + "' class='ui-li-thumb'><h3 class='ui-li-heading'>" + item1.title + "</h3></a></li></ul>"
				var clientPage1 =  clientPageHeader1 +"<br/><div><div style='background-image: url(css/images/Apagado.jpg); background-size: 100%;'><img id='page1_" + i + "_img' alt='' src='http://" + item1.url + "/snapshot.cgi?user=visitor&pwd=1234&t=1234' width='100%' /></div></div><div class='transbox'><p>" + item1.description + "</p></div>";
                var newPage1 = $("<div data-role=page id=page1_" + i + " data-url=page1" + i + " data-add-back-btn='true'><div data-role=header><h1> Mirolo | " + item1.title + "</h1></div><div data-role=content>" + clientPage1 + "</div></div>");

                newPage1.appendTo( $.mobile.pageContainer );

    
            });
        });

		document.addEventListener("deviceready", onDeviceReady, false);
		
    });
	
	// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
	function onDeviceReady() {
		navigator.network.isReachable('phonegap.com', reachableCallback);
	}	
	
</script>

<title>Mirolo</title>
<script src="js/jquery.mobile-1.2.0.min.js"></script>

</head>

<body id="page_body">
<div data-role="page" id="pageInicio">
    <div data-role="content">
		<br/>
		<div style="width: 100%; text-align: center;">
			<img src="css/images/Logo.png" alt="Logo" />
		</div><br/><br/>
		<div style="width: 100%; text-align: center;">
		<a href="#page0" data-theme="" id="btnVidaNocturna"> <img src="css/images/btnVidaNocturna.jpg"></a><br/><br/>
		<a href="#page1" data-theme="" id="btnGastronomia"> <img src="css/images/btnGastronomia.jpg"></a><br/><br/>
		<br/><br/>
		<a href="#pageQuien" data-theme="" id="QuienEsMirolo"> <img src="css/images/QuienEsMirolo.jpg"></a><br/><br/>
		</div>
		<div style="width: 90%; text-align: right;">
		<a href="#pagePrivacidad" data-theme="" id="Privacidad"> <img src="css/images/Privacidad.gif"></a><br/><br/>
		</div>
		<!--<div style="width: 100%; text-align: center;">
		<a data-role="button" data-inline="true" href="javascript:navigator.app.exitApp();">Salir</a>
		</div>-->
    </div>
</div>
<div data-role="page" id="page0" data-add-back-btn='true'>
    <div data-role=header>
        <h1>Mirolo</h1>
    </div>    
    <div data-role="content">
		<div style="text-align: center;"><img src="css/images/btnVidaNocturna.jpg" alt="Logo" /></div><br/>
        <ul data-role="listview" data-inset="false" data-filter="true" data-filter-placeholder="Filtrar..." id="menuList0"></ul>  
    </div>
</div>
<div data-role="page" id="page1" data-add-back-btn='true'>
    <div data-role=header>
        <h1>Mirolo</h1>
    </div>    
    <div data-role="content">
		<div style="text-align: center;"><img src="css/images/btnGastronomia.jpg" alt="Logo" /></div><br/>
        <ul data-role="listview" data-inset="false" data-filter="true" data-filter-placeholder="Filtrar..." id="menuList1"></ul>  
    </div>
</div>
<div data-role="page" id="pageQuien" data-add-back-btn='true'>
    <div data-role=header>
        <h1>Mirolo</h1>
    </div>    
    <div data-role="content">
        <img src="css/images/QuienEsMirolo.jpg"><br/><br/>
		<div class="transbox">
        <p>Una herramienta de comunicación y promoción móvil masiva que permite a los clientes publicar y mostrar en tiempo real lo que hay para hacer en sus negocios, y a los usuarios acceder a una Vitrina Digital de los lugares que son de su interés. Esta propuesta busca ser una alternativa eco amigable a la promoción de lugares y eventos, los cuales hoy en día hacen uso intensivo de papel y materiales de impresión. <br/><br/>Para más información visita <a href="http://www.mirolo.net" target="_blank">www.mirolo.net</a></p> 
		</div>
    </div>
</div>
<div data-role="page" id="pagePrivacidad" data-add-back-btn='true'>
    <div data-role=header>
        <h1>Mirolo</h1>
    </div> 
    <div data-role="content">
        <img src="css/images/Privacidad.gif"><br/><br/>
		<div class="transbox">
        <p>Me preocupo por tu privacidad, por eso no me escondo para que siempre sepas donde me encuentro, además no recuerdo nada, sólo miroleo y no grabo. Mi mente no almacena imágenes o recuerdos, no tengo memoria para reproducir los momentos, lugares ni personas. <br/><br/>Siempre tengo presente a todos los términos legales vigentes concernientes al derecho a la intimidad personal, familiar y habeas data, estipulados en el artículo 15 de la constitución y en el artículo 36 de la ley 23 de 1982.</p> 
		</div>
    </div>
</div>
</body>
</html>
​